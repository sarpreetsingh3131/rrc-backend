!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BASE_URL="/api",t.LOG_IN="/login",t.VALIDATE_TOKEN="/validate-token",t.CREATE_SHOP_INFO="/shop-info",t.RETRIEVE_SHOP_INFO="/shop-info",t.UPDATE_SHOP_INFO="/shop-info",t.CREATE_CATEGORY="/categories",t.RETRIEVE_CATEGORY="/categories/:id",t.RETRIEVE_CATEGORIES="/categories",t.UPDATE_CATEGORY="/categories",t.DELETE_CATEGORY="/categories/:id",t.CREATE_COLOR="/colors",t.RETRIEVE_COLOR="/colors/:id",t.RETRIEVE_COLORS="/colors",t.UPDATE_COLOR="/colors",t.DELETE_COLOR="/colors/:id",t.CREATE_SHAPE="/shapes",t.RETRIEVE_SHAPE="/shapes/:id",t.RETRIEVE_SHAPES="/shapes",t.UPDATE_SHAPE="/shapes",t.DELETE_SHAPE="/shapes/:id",t.CREATE_SIZE="/sizes",t.RETRIEVE_SIZE="/sizes/:id",t.RETRIEVE_SIZES="/sizes",t.UPDATE_SIZE="/sizes",t.DELETE_SIZE="/sizes/:id",t.CREATE_STYLE="/styles",t.RETRIEVE_STYLE="/styles/:id",t.RETRIEVE_STYLES="/styles",t.UPDATE_STYLE="/styles",t.DELETE_STYLE="/styles/:id",t.CREATE_WEAVE="/weaves",t.RETRIEVE_WEAVE="/weaves/:id",t.RETRIEVE_WEAVES="/weaves",t.UPDATE_WEAVE="/weaves",t.DELETE_WEAVE="/weaves/:id",t.CREATE_PRODUCT="/products",t.RETRIEVE_PRODUCT="/products/:id",t.RETRIEVE_PRODUCTS="/products",t.UPDATE_PRODUCT="/products",t.DELETE_PRODUCT="/products/:id"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.Controller=function(){function e(t){n(this,e),this.repository=t}return o(e,[{key:"create",value:function(e,t){this.repository.create(e.body).then(function(e){return t.status(201).send(e)}).catch(function(e){return t.status(e.status||500).send({message:e.message})})}},{key:"retrieve",value:function(e,t){this.repository.retrieve(e.params.id).then(function(e){return t.status(200).send(e)}).catch(function(e){return t.status(e.status||500).send({message:e.message})})}},{key:"update",value:function(e,t){this.repository.update(e.body).then(function(e){return t.status(200).send(e)}).catch(function(e){return t.status(e.status||500).send({message:e.message})})}},{key:"delete",value:function(e,t){this.repository.delete(e.params.id).then(function(e){return t.status(200).send(e)}).catch(function(e){return t.status(e.status||500).send({message:e.message})})}},{key:"search",value:function(e,t){this.repository.search(e.query).then(function(e){return t.status(200).send(e)}).catch(function(e){return t.status(e.status||500).send({message:e.message})})}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Repository=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(u),c=r(8);t.Repository=function(){function e(t){n(this,e),i.default.Promise=global.Promise,this.model=t}return o(e,[{key:"create",value:function(e){var t=this;return new Promise(function(r,n){t.model.init().then(function(){return t.model.create(e)}).then(function(e){return r(e)}).catch(function(e){return n(new c.MyError(e.message,400))})})}},{key:"retrieve",value:function(e,t,r){var n=this;return new Promise(function(o,u){n.model.find(e?{_id:e}:{}).populate(t).sort(r).exec().then(function(t){return e?t[0]?o(t[0]):u(new c.MyError("Entity not found",404)):o(t)}).catch(function(e){return u(new c.MyError(e.message,400))})})}},{key:"update",value:function(e,t,r){var n=this;return new Promise(function(o,u){n.model.findByIdAndUpdate({_id:e},t,{new:!0,runValidators:!0}).populate(r).exec().then(function(e){return e?o(e):u(new c.MyError("Entity not found",404))}).catch(function(e){return u(new c.MyError(e.message,400))})})}},{key:"delete",value:function(e){var t=this;return new Promise(function(r,n){t.model.findByIdAndRemove({_id:e}).exec().then(function(e){return e?r(e):n(new c.MyError("Entity not found",404))}).catch(function(e){return n(new c.MyError(e.message,400))})})}},{key:"search",value:function(e,t,r){var n=this;return new Promise(function(o,u){n.model.find(e).populate(t).sort(r).exec().then(function(e){return o(e)}).catch(function(e){return u(new c.MyError(e.message,400))})})}}]),e}()},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Category=t.CATEGORY_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i);t.CATEGORY_SCHEMA_NAME="category",t.Category=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:{type:String,required:!0,unique:!0,trim:!0}}))}return u(t,e),t}(c.default.Schema)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});t.MyError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Internal server error",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;n(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.status=r,u}return u(t,e),t}(Error)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Color=t.COLOR_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i);t.COLOR_SCHEMA_NAME="color",t.Color=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:{type:String,required:!0,unique:!0,trim:!0}}))}return u(t,e),t}(c.default.Schema)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.SHAPE_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i);t.SHAPE_SCHEMA_NAME="shape",t.Shape=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:{type:String,required:!0,unique:!0,trim:!0}}))}return u(t,e),t}(c.default.Schema)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Size=t.SIZE_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i);t.SIZE_SCHEMA_NAME="size",t.Size=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{length:{type:String,required:!0,trim:!0},width:{type:String,required:!0,trim:!0},unit:{type:String,required:!0,trim:!0}}))}return u(t,e),t}(c.default.Schema)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Style=t.STYLE_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i);t.STYLE_SCHEMA_NAME="style",t.Style=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:{type:String,required:!0,unique:!0,trim:!0}}))}return u(t,e),t}(c.default.Schema)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Weave=t.WEAVE_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i);t.WEAVE_SCHEMA_NAME="weave",t.Weave=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:{type:String,required:!0,unique:!0,trim:!0}}))}return u(t,e),t}(c.default.Schema)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(1),u=n(o),i=r(15),c=n(i),a=r(16),f=r(17),l=n(f),s=r(18),p=r(5),y=n(p),_=r(6),d=n(_),h=r(19),b=r(2),E=r(20),O=r(22),v=r(24),w=r(29),m=r(31),P=r(33),g=r(35),j=r(37);(0,a.config)(),(new h.DB).connect().then(function(e){var t=(0,u.default)();t.use(c.default.json({limit:"500mb"})),t.use((0,l.default)("common",{stream:y.default.createWriteStream(d.default.resolve(__dirname,"../access.log"),{flags:"a"})})),t.use(u.default.static(d.default.resolve(__dirname,"../public"))),t.use(function(e,t,r){t.type("json"),t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","POST, GET, OPTIONS, PUT, DELETE"),t.setHeader("Access-Control-Allow-Headers","Content-Type"),r()}),t.use(function(e,t,r){switch(e.method){case"PUT":case"POST":case"DELETE":e.path===b.BASE_URL+b.LOG_IN?r():(0,s.verify)(e.body.token,"mymacbookair13",function(e,n){return e||"rrc1300"!==n.username?t.status(403).send({message:e?e.message:"Invalid token"}):r()});break;default:r()}}),t.use(b.BASE_URL+b.LOG_IN,function(e,t){"OPTIONS"===e.method?t.status(200).send():"rrc1300"===e.body.username&&"rrc1300"===e.body.password?t.status(200).send({token:(0,s.sign)({username:e.body.username},"mymacbookair13",{expiresIn:"1h"})}):t.status(401).send({message:"Invalid credentials"})}),t.use(b.BASE_URL+b.VALIDATE_TOKEN,function(e,t){"OPTIONS"===e.method?t.status(200).send():(0,s.verify)(e.body.token,"mymacbookair13",function(e,r){return e||"rrc1300"!==r.username?t.status(403).send({message:e.message||"Invalid token"}):t.status(200).send({message:"Valid token"})})}),t.use(b.BASE_URL,new j.ShopInfoController,new E.CategoryController,new O.ColorController,new v.ProductController,new w.ShapeController,new m.SizeController,new P.StyleController,new g.WeaveController),t.use(function(e,t,r){return t.status(404).send({message:"URL not found"})}),t.use(function(e,t,r){return t.status(500).send({message:"Internal Server Error"})}),t.listen("3000",function(){return console.log(e,"\nserver is listening on port","3000")})}).catch(function(e){return console.log(e)})},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DB=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(u);t.DB=function(){function e(){n(this,e),i.default.Promise=global.Promise}return o(e,[{key:"connect",value:function(){return new Promise(function(e,t){i.default.connect("mongodb://localhost:27017/RRC",{useMongoClient:!0}).then(function(){return e("connected to DB")}).catch(function(){return t(new Error("cannot connect to DB"))})})}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(21);t.CategoryController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.CategoryRepository),e.route(f.CREATE_CATEGORY).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_CATEGORY).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.RETRIEVE_CATEGORIES).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.UPDATE_CATEGORY).put(function(t,r){return e.controller.update(t,r)}),e.route(f.DELETE_CATEGORY).delete(function(t,r){return e.controller.delete(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryRepository=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},a=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(7),s=r(4);t.CategoryRepository=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f.default.model(l.CATEGORY_SCHEMA_NAME,new l.Category)));return e.populate="",e.sort="name",e}return u(t,e),i(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,{name:e.name}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,{name:e.name},r.populate).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"delete",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",r).call(r,e).then(function(e){return n(e)}).catch(function(e){return o(e)})})}}]),t}(s.Repository)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(23);t.ColorController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.ColorRepository),e.route(f.CREATE_COLOR).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_COLOR).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.RETRIEVE_COLORS).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.UPDATE_COLOR).put(function(t,r){return e.controller.update(t,r)}),e.route(f.DELETE_COLOR).delete(function(t,r){return e.controller.delete(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorRepository=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},a=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(9),s=r(4);t.ColorRepository=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f.default.model(l.COLOR_SCHEMA_NAME,new l.Color)));return e.populate="",e.sort="name",e}return u(t,e),i(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,{name:e.name}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,{name:e.name},r.populate).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"delete",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",r).call(r,e).then(function(e){return n(e)}).catch(function(e){return o(e)})})}}]),t}(s.Repository)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProductController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(25);t.ProductController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.ProductRepository),e.route(f.CREATE_PRODUCT).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_PRODUCT).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.RETRIEVE_PRODUCTS).get(function(t,r){return t.query.category?e.controller.search(t,r):e.controller.retrieve(t,r)}),e.route(f.UPDATE_PRODUCT).put(function(t,r){return e.controller.update(t,r)}),e.route(f.DELETE_PRODUCT).delete(function(t,r){return e.controller.delete(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProductRepository=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},f=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(f),s=r(26),p=r(4),y=r(27),_=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l.default.model(s.PRODUCT_SCHEMA_NAME,new s.Product)));return e.imageService=new y.ImageService(y.PRODUCTS_DIR),e.populate="category shape size color style weave",e.sort="name",e}return u(t,e),c(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){r.createImages(e.images).then(function(n){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,r.product(e,n))}).then(function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e._id,r.populate,r.sort)}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(u){e&&a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,u._id,{views:u.views+1},r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)}),n(u)}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e.id,r.populate,r.sort).then(function(t){return r.updateImages(t.images,e.images)}).then(function(n){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,r.product(e,n),r.populate,r.sort)}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"delete",value:function(e){var r=this;return new Promise(function(n,o){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",r).call(r,e).then(function(e){return r.deleteImages(e.images).then(function(){return n(e)})}).catch(function(e){return o(e)})})}},{key:"search",value:function(e){var r=this;return new Promise(function(n,o){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"search",r).call(r,e,r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"createImages",value:function(e){var t=this;return new Promise(function(r,n){var o=[];e.map(function(e){return o.push(t.imageService.create(e))}),Promise.all(o).then(function(e){return r(e||[])}).catch(function(e){return n(e)})})}},{key:"deleteImages",value:function(e){var t=this;return new Promise(function(r,n){var o=[];e.map(function(e){return o.push(t.imageService.delete(e))}),Promise.all(o).then(function(){return r([])}).catch(function(e){return n(e)})})}},{key:"updateImages",value:function(e,t){var r=this;return new Promise(function(n,o){if(0===t.length)r.deleteImages(e).then(function(e){return n(e)}).catch(function(e){return o(e)});else if(0===e.length)r.createImages(t).then(function(e){return n(e)}).catch(function(e){return o(e)});else{var u=[],i=[];t.map(function(t){if(t.name)u.push(t);else{var r=e.indexOf(t);r>=0&&(i.push(t),e.splice(r,1))}}),Promise.all([r.createImages(u),r.deleteImages(e)]).then(function(e){var t=e[0];i.map(function(e){return t.push(e)}),n(t)}).catch(function(e){return o(e)})}})}},{key:"product",value:function(e,t){var r=i({},e,{images:t});return r.created&&delete r.created,r}}]),t}(p.Repository);t.ProductRepository=_},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Product=t.PRODUCT_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(7),f=r(10),l=r(11),s=r(12),p=r(13),y=r(9);t.PRODUCT_SCHEMA_NAME="product",t.Product=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:{type:String,required:!0,trim:!0,unique:!0},price:{type:String,required:!0,trim:!0},description:{type:String,required:!0,trim:!0},images:{type:Array,required:!1,trim:!0,default:[]},category:{type:i.SchemaTypes.ObjectId,ref:a.CATEGORY_SCHEMA_NAME,required:!1,trim:!0},views:{type:Number,required:!1,trim:!0,default:0},shape:{type:i.SchemaTypes.ObjectId,ref:f.SHAPE_SCHEMA_NAME,required:!1,trim:!0},size:{type:i.SchemaTypes.ObjectId,ref:l.SIZE_SCHEMA_NAME,required:!1,trim:!0},color:{type:i.SchemaTypes.ObjectId,ref:y.COLOR_SCHEMA_NAME,required:!1,trim:!0},style:{type:i.SchemaTypes.ObjectId,ref:s.STYLE_SCHEMA_NAME,required:!1,trim:!0},weave:{type:i.SchemaTypes.ObjectId,ref:p.WEAVE_SCHEMA_NAME,required:!1,trim:!0},created:{type:Date,required:!1,default:Date.now()}}))}return u(t,e),t}(c.default.Schema)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageService=t.PRODUCTS_DIR=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(5),c=n(i),a=r(6),f=n(a),l=r(28),s=r(8),p=f.default.resolve(__dirname,"../","public/assets/uploads"),y=f.default.resolve(__dirname,"../","public");t.PRODUCTS_DIR=f.default.resolve(p,"products"),t.ImageService=function(){function e(t){o(this,e),this.directory=t}return u(e,[{key:"create",value:function(e){var t=this;return new Promise(function(r,n){t.validate(e).then(function(e){return r(t.writeImage(e.data.replace(/^data:image\/\w+;base64,/,""),e.name,e.size))}).catch(function(e){return n(new s.MyError(e.message,400))})})}},{key:"delete",value:function(e){return new Promise(function(t,r){c.default.unlink(f.default.join(y,e),function(e){return e?r(new s.MyError(e.message,500)):t()})})}},{key:"validate",value:function(e){return new Promise(function(t,r){e.data.length>1&&e.name.length>1?t(e):r(new s.MyError("Invalid image",400))})}},{key:"writeImage",value:function(e,t,r){var n=this;return new Promise(function(o,u){c.default.writeFile(n.directory+"/"+t,l.Buffer.alloc(r,e,"base64"),function(e){return e?u(new s.MyError(e.message,400)):o(n.directory.split("public")[1]+"/"+t)})})}}]),e}()},function(e,t){e.exports=require("buffer")},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(30);t.ShapeController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.ShapeRepository),e.route(f.CREATE_SHAPE).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_SHAPE).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.RETRIEVE_SHAPES).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.UPDATE_SHAPE).put(function(t,r){return e.controller.update(t,r)}),e.route(f.DELETE_SHAPE).delete(function(t,r){return e.controller.delete(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeRepository=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},a=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(10),s=r(4);t.ShapeRepository=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f.default.model(l.SHAPE_SCHEMA_NAME,new l.Shape)));return e.populate="",e.sort="name",e}return u(t,e),i(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,{name:e.name}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,{name:e.name},r.populate).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"delete",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",r).call(r,e).then(function(e){return n(e)}).catch(function(e){return o(e)})})}}]),t}(s.Repository)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SizeController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(32);t.SizeController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.SizeRepository),e.route(f.CREATE_SIZE).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_SIZE).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.RETRIEVE_SIZES).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.UPDATE_SIZE).put(function(t,r){return e.controller.update(t,r)}),e.route(f.DELETE_SIZE).delete(function(t,r){return e.controller.delete(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SizeRepository=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},a=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(11),s=r(4);t.SizeRepository=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f.default.model(l.SIZE_SCHEMA_NAME,new l.Size)));return e.populate="",e.sort="length",e}return u(t,e),i(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,{length:e.length,width:e.width,unit:e.unit}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,{length:e.length,width:e.width,unit:e.unit},r.populate).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"delete",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",r).call(r,e).then(function(e){return n(e)}).catch(function(e){return o(e)})})}}]),t}(s.Repository)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StyleController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(34);t.StyleController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.StyleRepository),e.route(f.CREATE_STYLE).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_STYLE).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.RETRIEVE_STYLES).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.UPDATE_STYLE).put(function(t,r){return e.controller.update(t,r)}),e.route(f.DELETE_STYLE).delete(function(t,r){return e.controller.delete(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StyleRepository=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},a=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(12),s=r(4);t.StyleRepository=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f.default.model(l.STYLE_SCHEMA_NAME,new l.Style)));return e.populate="",e.sort="name",e}return u(t,e),i(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,{name:e.name}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,{style:e.name},r.populate).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"delete",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",r).call(r,e).then(function(e){return n(e)}).catch(function(e){return o(e)})})}}]),t}(s.Repository)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WeaveController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(36);t.WeaveController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.WeaveRepository),e.route(f.CREATE_WEAVE).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_WEAVE).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.RETRIEVE_WEAVES).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.UPDATE_WEAVE).put(function(t,r){return e.controller.update(t,r)}),e.route(f.DELETE_WEAVE).delete(function(t,r){return e.controller.delete(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WeaveRepository=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},a=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(13),s=r(4);t.WeaveRepository=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f.default.model(l.WEAVE_SCHEMA_NAME,new l.Weave)));return e.populate="",e.sort="name",e}return u(t,e),i(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,{name:e.name}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,{name:e.name},r.populate).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"delete",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",r).call(r,e).then(function(e){return n(e)}).catch(function(e){return o(e)})})}}]),t}(s.Repository)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ShopInfoController=void 0;var i=r(1),c=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(3),f=r(2),l=r(38);t.ShopInfoController=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.controller=new a.Controller(new l.ShopInfoRepository),e.route(f.CREATE_SHOP_INFO).post(function(t,r){return e.controller.create(t,r)}),e.route(f.RETRIEVE_SHOP_INFO).get(function(t,r){return e.controller.retrieve(t,r)}),e.route(f.UPDATE_SHOP_INFO).put(function(t,r){return e.controller.update(t,r)}),e}return u(t,e),t}(c.default.Router)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ShopInfoRepository=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},a=r(0),f=function(e){return e&&e.__esModule?e:{default:e}}(a),l=r(39),s=r(4);t.ShopInfoRepository=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f.default.model(l.SHOP_INFO_SCHEMA_NAME,new l.ShopInfo)));return e.populate="",e.sort="",e}return u(t,e),i(t,[{key:"create",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",r).call(r,{name:e.name,address:e.address,phones:e.phones,email:e.email}).then(function(e){return n(e)}).catch(function(e){return o(e)})})}},{key:"retrieve",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"retrieve",r).call(r,e,r.populate,r.sort).then(function(e){return n(e[0])}).catch(function(e){return o(e)})})}},{key:"update",value:function(e){var r=this;return new Promise(function(n,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",r).call(r,e.id,{name:e.name,address:e.address,phones:e.phones,email:e.email},r.populate).then(function(e){return n(e)}).catch(function(e){return o(e)})})}}]),t}(s.Repository)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ShopInfo=t.SHOP_INFO_SCHEMA_NAME=void 0;var i=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(i);t.SHOP_INFO_SCHEMA_NAME="shop-info",t.ShopInfo=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:{type:String,required:!0,trim:!0},address:{type:String,required:!0,trim:!0},phones:{type:Array,required:!0},email:{type:String,required:!0,trim:!0}}))}return u(t,e),t}(c.default.Schema)}]);
//# sourceMappingURL=rrc-backend.js.map